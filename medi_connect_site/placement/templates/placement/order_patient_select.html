{% extends "customer_header.html" %}

{% block content %}

<div>
    <h3 id="timer"></h3>
</div>

<table class="table">
    <tr>
        <th>Name</th>
        <th>Birth</th>
        <th>Gender</th>
        <th></th>
    </tr>

    {% for patient in patients %}
    <tr>
        <td>{{patient.get_name}}</td>
        <td>{{patient.birth}}</td>
        <td>{{patient.gender}}</td>
        <td>
            <form action="{% url 'order_patient_finish'  order_id=order_id patient_id=patient.id %}">
                <button>Select This Patient</button>
            </form>
        </td>
    </tr>
    {% endfor %}
</table>

<script>
(function timer (offset) {
    setTimeout(function () {
        var timestamp = {{ time }};
        timestamp = 5 * 60 - timestamp - offset;
        var minutes =  Math.floor(timestamp / 60);
        var seconds =  Math.floor(timestamp % 60);
        document.getElementById("timer").innerHTML = "距离你的订单结束还有：" +  minutes + " : " + seconds;
        timer(offset + 0.5);
    }, 500);
})(0)
</script>

{% endblock %}
