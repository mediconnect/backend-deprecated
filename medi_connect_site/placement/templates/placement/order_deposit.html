{% extends "customer_header.html" %}

{% block content %}

<div class="btn-group btn-group-justified" role="group" aria-label="...">
  <div class="btn-group" role="group">
    <a type="button" class="btn btn-default" href="{% url 'order_patient_info' order_id=order.id %}">01 Patient Info</a>
  </div>
  <div class="btn-group" role="group">
    <a type="button" class="btn btn-default" href="{% url 'order_document_info' order_id=order.id %}">02 Disease Info</a>
  </div>
  <div class="btn-group" role="group">
    <a type="button" class="btn btn-default" href="{% url 'order_review' order_id=order.id %}">03 Review</a>
  </div>
  <div class="btn-group" role="group">
    <a type="button" class="btn btn-primary" href="{% url 'order_deposit' order_id=order.id %}">04 Deposit</a>
  </div>
</div>

<div>
    <h3 id="timer"></h3>
</div>

<input type="radio" name="deposit" id="full-option">All<br>
<input type="radio" name="deposit" id="half-option" checked>Half

<form method="post" role="form" id="deposit">
    {% csrf_token %}
    <input type="hidden" name="amount" value=-1 id="value">
    <button type="submit" class="btn btn-default" id="submit">Deposit</button>
</form>

<script>
(function timer (offset) {
    setTimeout(function () {
        var timestamp = {{ time }};
        timestamp = 5 * 60 - timestamp - offset;
        var minutes =  Math.floor(timestamp / 60);
        var seconds =  Math.floor(timestamp % 60);
        document.getElementById("timer").innerHTML = "距离你的订单结束还有：" +  minutes + " : " + seconds;
        if (timestamp <= 0) {
            window.location = "{% url 'order_expire' %}";
        }
        timer(offset + 0.5);
    }, 500);
})(0);

$("#full-option").change(function() {
    if ( this.checked ) {
        $("#value").val(0);
    }
});
$("#half-option").change(function() {
    if ( this.checked ) {
        $("#value").val(-1);
    }
});
</script>

{% endblock %}
